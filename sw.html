<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pro Stopwatch</title>
    <style>
        /* デザインの定義 */
        body {
            background-color: #000000;
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            touch-action: manipulation; /* ダブルタップ拡大防止 */
        }

        /* 時間表示部 */
        #display {
            font-size: 80px;
            font-weight: 200;
            font-variant-numeric: tabular-nums; /* 数字の幅を固定してガタつき防止 */
            margin-bottom: 80px;
            width: 100%;
            text-align: center;
        }

        /* ボタン配置エリア */
        .controls {
            display: flex;
            justify-content: space-between;
            width: 300px;
        }

        /* ボタン共通デザイン */
        button {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 2px solid;
            font-size: 18px;
            cursor: pointer;
            outline: none;
            background-color: transparent;
            position: relative;
            /* タップ時のハイライトを無効化 */
            -webkit-tap-highlight-color: transparent;
        }

        /* ボタンの内円（デザイン装飾） */
        button::before {
            content: '';
            position: absolute;
            top: 2px; left: 2px; right: 2px; bottom: 2px;
            border-radius: 50%;
            opacity: 0.2;
            z-index: -1;
        }

        /* リセットボタン */
        #resetBtn {
            border-color: #333;
            color: #fff;
        }
        #resetBtn::before { background-color: #fff; }
        
        /* スタートボタン */
        #startStopBtn.start {
            border-color: #0a3f0a;
            color: #4cd964;
            background-color: #082a08; /* 背景色で視認性向上 */
        }
        
        /* ストップボタン */
        #startStopBtn.stop {
            border-color: #3f0a0a;
            color: #ff3b30;
            background-color: #2a0808;
        }

    </style>
</head>
<body>

    <div id="display">00:00.00</div>

    <div class="controls">
        <button id="resetBtn" onclick="reset()">Reset</button>
        <button id="startStopBtn" class="start" onclick="toggle()">Start</button>
    </div>

    <script>
        // ロジック部分
        let startTime;
        let elapsedTime = 0;
        let timerInterval;
        let isRunning = false;

        const display = document.getElementById('display');
        const startStopBtn = document.getElementById('startStopBtn');

        function toggle() {
            if (isRunning) {
                stop();
            } else {
                start();
            }
        }

        function start() {
            isRunning = true;
            // 現在時刻から経過時間を引くことで、再開時も正確な時間を計算
            startTime = Date.now() - elapsedTime;
            
            // 10ミリ秒ごとに画面更新
            timerInterval = setInterval(updateTime, 10);

            // ボタンのデザイン変更
            startStopBtn.textContent = 'Stop';
            startStopBtn.className = 'stop';
        }

        function stop() {
            isRunning = false;
            clearInterval(timerInterval);
            
            startStopBtn.textContent = 'Start';
            startStopBtn.className = 'start';
        }

        function reset() {
            stop();
            elapsedTime = 0;
            updateDisplay(0);
        }

        function updateTime() {
            elapsedTime = Date.now() - startTime;
            updateDisplay(elapsedTime);
        }

        function updateDisplay(time) {
            // ミリ秒、秒、分を計算
            let diffInHrs = time / 3600000;
            let hh = Math.floor(diffInHrs);

            let diffInMin = (diffInHrs - hh) * 60;
            let mm = Math.floor(diffInMin);

            let diffInSec = (diffInMin - mm) * 60;
            let ss = Math.floor(diffInSec);

            let diffInMs = (diffInSec - ss) * 100;
            let ms = Math.floor(diffInMs);

            // ゼロ埋め処理 (例: 1 -> 01)
            let formattedMM = mm.toString().padStart(2, "0");
            let formattedSS = ss.toString().padStart(2, "0");
            let formattedMS = ms.toString().padStart(2, "0");

            display.textContent = `${formattedMM}:${formattedSS}.${formattedMS}`;
        }
    </script>
</body>
</html>